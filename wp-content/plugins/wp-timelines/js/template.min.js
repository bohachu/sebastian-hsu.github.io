jQuery(document).ready(function(e){function t(e){var t=jQuery(window).scrollTop(),i=t+jQuery(window).height(),a=jQuery(e).offset().top;return a+jQuery(e).height()<=i+200&&a>=t}function i(){e(".wpex-timeline-list.wpex-infinite").each(function(){var i=jQuery(this).attr("id");if(e("#"+i+" .wpex-loadmore a.loadmore-timeline").length){var a=e("#"+i+" .wpex-loadmore a.loadmore-timeline");!t("#"+i+" .wpex-loadmore a.loadmore-timeline")||a.hasClass("loading")||e("#"+i+" .wpex-loadmore").hasClass("hidden")||a.trigger("click")}})}function a(){var t=e(this);e(".wpex-timeline-list").each(function(){var i=jQuery(this).attr("id"),a=e(this),l=a.offset().top,s=l+a.height();l-=200,s=s,e(document).scrollTop()>=l&&e(document).scrollTop()<=s?e("#"+i+" .wpex-filter").addClass("active"):e("#"+i+" .wpex-filter").removeClass("active");var o=e(window).height(),n=.3*o;t.scrollTop(),e("#"+i+" ul li").each(function(){var t=e(this).data("id"),a=e(this).offset().top-e(window).scrollTop();e(this).height(),a>=n?e("#"+t).removeClass("active"):e("#"+t).addClass("active");var l=e("#"+i).data("animations");""!=l&&a<.7*o&&e(this).children(":first").removeClass("scroll-effect").addClass(l+" animated")})})}if(e(".wpex-filter:not(.year-ft)").on("click","div span",function(){var t=jQuery(this).attr("id"),i=e(window).height();e("html,body").animate({scrollTop:e("."+t).offset().top-.2*i},"slow")}),e(".wpex-timeline-list").length&&(a(),i(),e(document).scroll(function(){a(),i()})),e(".wpex-filter.year-ft").on("click","div span",function(){var t=e(this),l=jQuery(this).data("id");e("#timeline-"+l).addClass("loading no-more");var s="timeline-"+l;e("#"+s+" .wpex-filter.year-ft div span").removeClass("active"),t.addClass("active");var o=jQuery(this).data("value"),n="";e("#"+s+" .wpex-taxonomy-filter li a.active").length&&(n=e("#"+s+" .wpex-taxonomy-filter li a.active").data("value"));var r=e("#timeline-"+l+" input[name=ajax_url]").val(),d=e("#timeline-"+l+" input[name=param_shortcode]").val();e("#"+s+" .wpex-loadmore.lbt").addClass("hidden"),e("#timeline-"+l+" ul.wpex-timeline li").fadeOut(300,function(){e(this).remove()});var p={action:"wpex_filter_year",taxonomy_id:o,mult:n,param_shortcode:d};return e.ajax({type:"post",url:r,dataType:"json",data:p,success:function(l){if("0"!=l){if(""!=l){var o=e("#"+s+" ul.wpex");o.html(""),""!=l.html_content?(e("#"+s+" .wpex-tltitle.wpex-loadmore").prepend('<span class="yft">'+t.html()+"</span>"),e("#"+s+" .wpex-loadmore:not(.lbt)").removeClass("hidden"),o.append(l.html_content)):(e("#"+s+" .wpex-loadmore").addClass("hidden"),o.append('<h2 style="text-align: center;">'+l.massage+"</h2>")),setTimeout(function(){e("#"+s+" ul.wpex > li").addClass("active")},200),e("#"+s).removeClass("loading")}a(),i(),e(".wpex-timeline-list .wpex-filter:not(.active)").css("right",-1*e(".wpex-timeline-list .wpex-filter").width())}else e(".row.loadmore").html("error")}}),!1}),e(".wpex-taxonomy-filter").on("click","li a",function(){var t=e(this),i=jQuery(this).data("id"),l="timeline-"+i;e("#timeline-"+i+" .wpex-taxonomy-filter li a").removeClass("active"),e("#"+l+" .wpex-filter.year-ft div span").removeClass("active"),e("#"+l+" .wpex-loadmore").removeClass("hidden"),t.addClass("active");var s=jQuery(this).data("value"),o=e("#timeline-"+i+" input[name=ajax_url]").val(),n=e("#timeline-"+i+" input[name=param_shortcode]").val();e("#timeline-"+i).addClass("loading"),e("#timeline-"+i+" ul.wpex-timeline li").fadeOut(300,function(){e(this).remove()}),e("#"+l+" input[name=num_page_uu]").val(1),e("#"+l+" input[name=current_page]").val(1),e("#"+l+" .wpex-tltitle.wpex-loadmore .yft").remove();var r={action:"wpex_filter_taxonomy",taxonomy_id:s,param_shortcode:n};return e.ajax({type:"post",url:o,dataType:"json",data:r,success:function(t){if("0"!=t){if(""==t)e("#"+l+" .wpex-loadmore.lbt").addClass("hidden");else{var i=e("#"+l+" ul.wpex");i.html(""),i.append(t.html_content),e("#"+l+" .wpex-filter:not(.year-ft) div span").remove(),e("#"+l+" .wpex-filter:not(.year-ft) div").append(t.date),setTimeout(function(){e("#"+l+" ul.wpex > li").addClass("active")},200),e("#"+l).removeClass("loading"),e("#"+l+" input[name=param_query]").val(JSON.stringify(t.data_query))}1!=t.more?(e("#"+l).addClass("no-more"),e("#"+l+" .wpex-loadmore.lbt").addClass("hidden")):e("#"+l).removeClass("no-more"),a(),e(".wpex-timeline-list .wpex-filter:not(.active)").css("right",-1*e(".wpex-timeline-list .wpex-filter").width())}else e(".row.loadmore").html("error")}}),!1}),e(".loadmore-timeline").on("click",function(){var t=e(this);t.addClass("disable-click");var i=t.data("id"),l=e("#"+i+" input[name=num_page_uu]").val();e("#"+i+" .loadmore-timeline").addClass("loading");var s=e("#"+i+" input[name=param_query]").val(),o=e("#"+i+" input[name=current_page]").val(),n=e("#"+i+" input[name=num_page]").val(),r=e("#"+i+" input[name=ajax_url]").val(),d=e("#"+i+" input[name=param_shortcode]").val(),p="";e("#"+i+" li:last-child > input.crr-year").length&&(p=e("#"+i+" li:last-child > input.crr-year").val());var c={action:"wpex_loadmore_timeline",param_query:s,page:1*o+1,param_shortcode:d,param_year:p};return e.ajax({type:"post",url:r,dataType:"json",data:c,success:function(s){"0"!=s?(l=1*l+1,e("#"+i+" input[name=num_page_uu]").val(l),""==s.html_content?e("#"+i+" .wpex-loadmore.lbt").addClass("hidden"):(e("#"+i+" input[name=current_page]").val(1*o+1),e("#"+i+" ul.wpex").append(s.html_content),e("#"+i+" .wpex-filter:not(.year-ft) div").append(s.date),setTimeout(function(){e("#"+i+" ul.wpex > li").addClass("active")},200)),l==n&&(e("#"+i).addClass("no-more"),e("#"+i+" .wpex-loadmore.lbt").addClass("hidden")),a(),e(".wpex-timeline-list .wpex-filter:not(.active)").css("right",-1*e(".wpex-timeline-list .wpex-filter").width()),e("#"+i+" .loadmore-timeline").removeClass("loading"),t.removeClass("disable-click")):e(".row.loadmore").html("error")}}),!1}),e(".wpex-timeline-list .wpex-filter").css("right",-1*e(".wpex-timeline-list .wpex-filter").width()),e(".wpex-timeline-list .wpex-filter > .fa").on("click",function(){var t=e(this).data("id");e("#"+t+" .wpex-filter").hasClass("show-filter")?(e("#"+t+" .wpex-filter").removeClass("show-filter"),e("#"+t+" .wpex-filter").css("right",-1*e(".wpex-timeline-list .wpex-filter").width())):(e("#"+t+" .wpex-filter").addClass("show-filter"),e("#"+t+" .wpex-filter").css("right",0))}),e(".wpex-timeline-list").length){var l=e(".wpex-timeline-list").offset().top;e(".wpex-timeline-list ul").height(),e(document).scrollTop()>=l&&e(document).scrollTop()}e(".wpex-timeline-list").each(function(){var t=e(this),i=t.attr("id");e(t).hasClass("wptl-lightbox")&&(e("#"+i).hasClass("left-tl")&&e("#"+i).hasClass("show-icon")?e("#"+i+" ul.wpex-timeline").slickLightbox({itemSelector:"> li .wpex-content-left > a",useHistoryApi:!0}):e("#"+i).hasClass("show-clean")?e("#"+i+" ul.wpex-timeline").slickLightbox({itemSelector:" .wpex-timeline-label > a",useHistoryApi:!0}):e("#"+i).hasClass("show-wide_img")?e("#"+i+" ul.wpex-timeline").slickLightbox({itemSelector:" .timeline-details > a",useHistoryApi:!0}):e("#"+i).hasClass("left-tl")||e("#"+i).hasClass("center-tl")&&!e("#"+i).hasClass("show-icon")?e("#"+i+" ul.wpex-timeline").slickLightbox({itemSelector:"> li .wpex-timeline-time > a",useHistoryApi:!0}):e("#"+i+" ul.wpex-timeline").slickLightbox({itemSelector:"> li .timeline-details > a",useHistoryApi:!0}))}),e(".horizontal-timeline.ex-multi-item").each(function(){var t=e(this),i=t.data("id"),a=t.data("slidesshow"),l=(t.data("startit")>0&&t.data("startit"),t.data("autoplay")),s=t.data("speed"),o=t.data("rtl"),n=t.data("start_on")>0?t.data("start_on"):0;e("#"+i+" .horizontal-nav").EX_ex_s_lick({infinite:!1,initialSlide:n,rtl:"yes"==o,prevArrow:'<button type="button" class="ex_s_lick-prev"><i class="fa fa-angle-left"></i></button>',nextArrow:'<button type="button" class="ex_s_lick-next"><i class="fa fa-angle-right"></i></button>',slidesToShow:a,slidesToScroll:1,dots:!1,autoplay:1==l,autoplaySpeed:""!=s?s:3e3,arrows:!0,centerMode:!1,focusOnSelect:!0,adaptiveHeight:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]})}),e(".horizontal-timeline:not(.ex-multi-item) ul.horizontal-nav li").on("click",function(){e(this).prevAll().addClass("prev_item"),e(this).nextAll().removeClass("prev_item")}),e(window).resize(function(){e(".horizontal-timeline:not(.ex-multi-item)").each(function(){var t=e(this);setTimeout(function(){var i=t.data("id"),a=e("#"+i+" ul.horizontal-nav li.ex_s_lick-current"),l=a.offset(),s=e("#"+i+" .horizontal-nav").offset(),o=a.width(),n=l.left-s.left+o/2;e("#"+i+" .timeline-pos-select").css("width",n)},200)})}),e(".horizontal-timeline:not(.ex-multi-item)").each(function(){var t=e(this);t.hasClass("tl-hozsteps")&&(p=!1),t.data("layout");var i=t.data("id"),a=t.data("count"),l=t.data("slidesshow"),s=t.data("arrowpos"),o=(t.data("startit")>0&&t.data("startit"),t.data("autoplay")),n=t.data("speed"),r=t.data("rtl"),d=t.data("start_on")>0?t.data("start_on"):0,p=t.data("center");e("#"+i+" .horizontal-content").on("beforeChange",function(t,a,l,s){$li_curr=s+1,e("#"+i+" .horizontal-nav li.ex_s_lick-slide:nth-child("+$li_curr+")").prevAll().addClass("prev_item"),e("#"+i+" .horizontal-nav li.ex_s_lick-slide:nth-child("+$li_curr+")").nextAll().removeClass("prev_item")}).on("afterChange",function(t,a,l,s){for(var o=0;o<a.$slides.length;o++){var n=e(a.$slides[o]);if(n.hasClass("ex_s_lick-current")){$pos_c=o+1;var r=(n=e("#"+i+" ul.horizontal-nav li:nth-child("+$pos_c+")")).offset(),d=e("#"+i+" .horizontal-nav").offset(),p=n.width(),c=r.left-d.left+p/2;e("#"+i+" .timeline-pos-select").css("width",c),n.removeClass("prev_item"),n.nextAll().removeClass("prev_item");break}}}).EX_ex_s_lick({infinite:!1,speed:""!=n?n:250,initialSlide:d,rtl:"yes"==r,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,autoplay:1==o&&a<=l,arrows:"top"!=s,prevArrow:'<button type="button" class="ex_s_lick-prev"><i class="fa fa-angle-left"></i></button>',nextArrow:'<button type="button" class="ex_s_lick-next"><i class="fa fa-angle-right"></i></button>',fade:!0,asNavFor:"#"+i+" .horizontal-nav"}),e("#"+i+" .horizontal-nav").on("init",function(t,a,l){if(""!=d&&e.isNumeric(d))(s=e(a.$slides[d])).addClass("ex_s_lick-current"),e(a.$slides[0]).removeClass("ex_s_lick-current"),s.nextAll().removeClass("prev_item"),s.prevAll().addClass("prev_item");else var s=e(a.$slides[0]);if(s.hasClass("ex_s_lick-current"))var o=s.offset(),n=e("#"+i+" .horizontal-nav").offset(),r=s.width(),p=o.left-n.left+r/2;e("#"+i+" .timeline-pos-select").css("width",p)}).EX_ex_s_lick({infinite:!1,speed:""!=n?n:250,initialSlide:d,rtl:"yes"==r,prevArrow:'<button type="button" class="ex_s_lick-prev"><i class="fa fa-angle-left"></i></button>',nextArrow:'<button type="button" class="ex_s_lick-next"><i class="fa fa-angle-right"></i></button>',slidesToShow:l,slidesToScroll:1,asNavFor:"#"+i+" .horizontal-content",dots:!1,autoplay:1==o,autoplaySpeed:""!=n?n:3e3,arrows:"top"==s,centerMode:"left"!=p,focusOnSelect:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]})})});